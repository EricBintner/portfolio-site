
var BlurFilter_cls = NewEffect.extend({
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	//Init var
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	//------------------------------------------------------------------------
	//Number
	//------------------------------------------------------------------------
	blurAmt:undefined,
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	//static
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	from:function(_master_init, _dur_init, _obj_init) {
		return new BlurFilter_cls().preStart(_master_init, _dur_init, _obj_init, "from");
	},
	//------------------------------------------------------------------------
	to:function(_master_init, _dur_init, _obj_init) {
		return new BlurFilter_cls().preStart(_master_init, _dur_init, _obj_init, "to");
	},
	//------------------------------------------------------------------------
	set:function(_master_init, _obj_init) {
		return new BlurFilter_cls().preStart(_master_init, 0, _obj_init, "to");
	},
	//-------------------------------------------------------------------------------------------------------------------
	start:function() {
		//----------------------------------------------------
		//init var
		//----------------------------------------------------
		var curBlurAmt;
		//----------------------------------------------------
		if ((curBlurAmt = this.getNumeric()) == undefined) curBlurAmt = 0;
		//----------------------------------------------------
		this.setBlur(curBlurAmt);
		//----------------------------------------------------
		if (this.callFunction == "from") this.setBlur(this.blurAmt);
		//----------------------------------------------------
		var blurObj = {blurAmt:(this.callFunction == "from") ? this.blurAmt: curBlurAmt};
		//----------------------------------------------------
		TweenLite.to(blurObj, 1, {delay:this.delay, blurAmt:(this.callFunction == "from") ? curBlurAmt: this.blurAmt, onUpdate:$.proxy(this.onUpdate_handler, this), onUpdateParams:[blurObj]});
	},
	//-------------------------------------------------------------------------------------------------------------------
	getNumeric:function() {
		//----------------------------------------------------
		//init var
		//----------------------------------------------------
		var val;
		//----------------------------------------------------
		if ((val = this.master.css("filter")) == "none"){
			val = this.master.css("-webkit-filter");
		}
		//----------------------------------------------------
		if (val != "none") {
			var modified;
			var regExp = /\(([^)]+)\)/;
			var str = regExp.exec(val);
			if (str != null) {
				modified = StringUtil.px(str[1]);
			}
		}
		return modified;
	},
	//-------------------------------------------------------------------------------------------------------------------
	onUpdate_handler:function(blurObj) {
		this.setBlur(blurObj.blurAmt);
	},
	//-------------------------------------------------------------------------------------------------------------------
	setBlur:function(_blur) {
		TweenLite.set(this.master, {css:{'-webkit-filter':"blur("+_blur+"px)", 'filter':"blur("+_blur+"px)"}});
	}
});
var BlurFilter = new BlurFilter_cls();
